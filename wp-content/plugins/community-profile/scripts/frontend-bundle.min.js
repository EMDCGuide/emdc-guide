!function(r){var t={};function e(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=r,e.c=t,e.d=function(r,t,a){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:a})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="/",e(e.s=12)}([,function(r,t){},function(r,t){},,,,,,,,,,function(r,t,e){e(13),e(2),e(1),e(14),r.exports=e(15)},function(r,t){},function(r,t){jQuery(function(r){if(r("#copr-community-profile").length>0){r(".copr-js-hide").hide(),r(".copr-js-show").show(),r(".copr-my-response-textarea").val(""),r(document).on("click",".copr-delete-answer",function(){var t=r(this).closest("form"),e=t.attr("data-really-message"),a="".concat(t.serialize(),"&is_ajax=true"),o="#copr-single-answer-"+t.find('input[name="answer_id"]').first().val();return confirm(e)&&r.post(t.attr("action"),a).done(function(t){t.success&&r(o).slideUp("slow")}).fail(function(){var e=r(o).find(".copr-form-error").first(),a=t.attr("data-error-message");e.html("<p>".concat(a,"</p>")).show()}),!1}),r(document).on("click",".copr-edit-link",function(){var t=r(this),e=t.closest(".copr-single-answer"),a=t.attr("data-showing-text"),o=t.attr("data-hiding-text");return e.hasClass("is-editing")?(e.find(".copr-answer-text-wrapper").first().show(),e.find(".copr-edit-answer").first().hide(),e.removeClass("is-editing"),t.html('<span class="dashicons dashicons-edit"></span>'+o)):(e.find(".copr-answer-text-wrapper").first().hide(),e.find(".copr-edit-answer").first().show(),e.addClass("is-editing"),t.html('<span class="dashicons dashicons-edit"></span> '+a)),!1}),r(document).on("submit","form.copr-edit-answer",function(){for(var t=r(this),e=t.find("input:submit").first(),a=t.closest(".copr-single-answer"),o="".concat(t.serialize(),"&is_ajax=true"),s=(t.find('input[name="answer"]').first(),t.serializeArray()),n="",i=0;i<s.length;i++)"answer"===s[i].name&&(n=s[i].value);return e.val(e.attr("data-saving")).prop("disabled","disabled").addClass("copr-disabled"),r.post(t.attr("action"),o).done(function(r){(e.val(e.attr("data-save")).prop("disabled","").removeClass("copr-disabled"),r.success)&&(a.find(".copr-answer-text").first().text(n),a.find(".copr-edit-link").first().click())}).fail(function(){e.val(e.attr("data-save")).prop("disabled","").removeClass("copr-disabled");var r=a.find(".copr-form-error").first(),o=t.attr("data-error-message");r.html("<p>".concat(o,"</p>")).show()}),!1});var t=r("#copr-section-filter select");r(".copr-section-wrapper").each(function(){var e=r(this).attr("data-title"),a=r(this).attr("data-tag");t.append('<option value="'+a+'">'+e+"</option>")}),t.on("change",function(){var t=r(this).val();"all"===t?r(".copr-section-wrapper").show():(r(".copr-section-wrapper").hide(),r("#section-"+t).show())}),r("form.copr-my-response").submit(function(){for(var t=r(this),e=(t.find('*[name="answer"]').first(),t.find(".copr-answer-error").first(),t.closest(".copr-my-response-wrapper")),a="".concat(t.serialize(),"&is_ajax=true"),o=t.find('input[type="submit"]').first(),s=t.serializeArray(),n="",i=0;i<s.length;i++)"group_id"===s[i].name&&(n=s[i].value);return o.val(o.attr("data-saving")).prop("disabled","disabled").addClass("copr-disabled"),r.post(t.attr("action"),a).done(function(a){if(a.success){var s="action=copr_get_template&group_id=".concat(n,"&answer_id=").concat(a.data.id,"&template_name=_single_answer");r.get(t.attr("action"),s).done(function(t){o.val(o.attr("data-save")).prop("disabled","").removeClass("copr-disabled"),e.slideUp("slow",function(){var a=r(t);a.find(".copr-js-hide").hide(),a.find(".copr-js-show").css("display","block"),a.find("a.copr-js-show").css("display","inline-block"),e.replaceWith(a)})}).fail(function(){o.val(o.attr("data-save")).prop("disabled","").removeClass("copr-disabled"),e.slideUp("slow")})}else a.errors.forEach(function(r){var e=t.find('*[name="'.concat(r.field,'"]')).first();e.length>0&&e.addClass("copr-errored");var a=t.find(".copr-".concat(r.field,"-error")).first();a.length>0&&a.text(r.error).removeClass("copr-hidden")}),o.val(o.attr("data-save")).prop("disabled","").removeClass("copr-disabled")}).fail(function(){o.val(o.attr("data-save")).prop("disabled","").removeClass("copr-disabled");var r=e.find(".copr-form-error").first(),a=t.attr("data-error-message");r.html("<p>".concat(a,"</p>")).show()}),!1})}})},function(r,t){jQuery(function(r){function t(){var t=this;r(".copr-answer-textarea").val(""),r(".copr-questions-wrapper .copr-answer-choices").each(function(){$children=r(t).find('input[name="answer"]'),$children.prop("checked",!1),$children.first().prop("checked",!0)})}function e(t){var e="",a=[];if(r(".copr-question-form").each(function(){$ele=r(this),""===e&&(e=$ele.attr("data-ajax-url")),a.push($ele.attr("data-section-tag"))}),""!==e){var o="is_ajax=true&action=copr_get_answers&tags=".concat(a.join(","));r.get(e,o).done(function(e){for(var a in e){var o=function(t){var o=e[a][t];$element=r('*[data-question-hash="'.concat(t,'"]')).first(),$element.hasClass("copr-answer-choices")?$element.find('input[name="answer"]').each(function(){r(this).prop("checked",r(this).val()===o)}):$element.val(o)};for(var s in e[a])o(s)}t&&t()})}else console.error("Missing the data-ajax-url on .copr-question-form.")}function a(t,e,a){var o="".concat(t.serialize(),"&is_ajax=true"),s=t.closest(".copr-question-form").first().find(".copr-form-error").first();e.val(e.attr("data-saving")).prop("disabled","disabled").addClass("copr-disabled"),r.post(t.attr("action"),o).done(function(r){e.val(e.attr("data-save")).prop("disabled","").removeClass("copr-disabled"),r.success?(s.html("").hide(),a(r)):r.errors.forEach(function(r){var e=t.find('*[name="'.concat(r.field,'"]')).first();e.length>0&&e.addClass("copr-errored");var a=t.find(".copr-".concat(r.field,"-error")).first();a.length>0&&a.text(r.error).removeClass("copr-hidden")})}).fail(function(){e.val(e.attr("data-save")).prop("disabled","").removeClass("copr-disabled"),s.html("<p>".concat(t.attr("data-error-message"),"</p>")).show()})}if(r(".copr-questions-wrapper").length>0){r(".copr-js-hide").hide(),r(".copr-js-show").show(),t(),e(),1===r(".copr-group-selector").first().find("option").length&&r(".copr-selector-or-wrapper").hide();var o=(s="copr-group-selected",n="",document.cookie.split(";").forEach(function(r){var t=r.split("=");s==t[0].trim()&&(n=decodeURIComponent(t[1]))}),n);o&&r('.copr-group-selector, input[name="group_id"]').val(o),r(".copr-questions-wrapper").each(function(){var t=r(this),e=t.children(),a=e.not(":first").not(".copr-hidden").attr("data-number"),o=e.length;t.attr("data-current",a).attr("data-total",o-1),e.eq(1).find(".copr-previous").first().addClass("copr-disabled"),e.last().find(".copr-next").first().addClass("copr-disabled")}),r(".copr-questions-wrapper .copr-next").on("click",function(){var t=r(this);if(t.hasClass("copr-disabled"))return!1;var e=t.closest(".copr-questions-wrapper"),a=parseInt(e.attr("data-current"),10),o=(parseInt(e.attr("data-total"),10),a+1);return e.find('div[data-number="'.concat(a,'"]')).fadeOut("slow",function(){e.find('div[data-number="'.concat(o,'"]')).fadeIn("slow"),e.attr("data-current",o)}),!1}),r(".copr-questions-wrapper .copr-previous").on("click",function(){var t=r(this);if(t.hasClass("copr-disabled"))return!1;var e=t.closest(".copr-questions-wrapper"),a=parseInt(e.attr("data-current"),10),o=(parseInt(e.attr("data-total"),10),a-1);return e.find('div[data-number="'.concat(a,'"]')).fadeOut("slow",function(){e.find('div[data-number="'.concat(o,'"]')).fadeIn("slow"),e.attr("data-current",o)}),!1}),r(".copr-question-field-wrapper form").submit(function(){var t=r(this),e=t.find('input[type="submit"]').first(),o=t.find(".copr-next").first();return a(t,e,function(){t.find("input, textarea").removeClass("copr-errored"),t.find(".copr-error-message").addClass("copr-hidden").text(""),o.click()}),!1}),r("form.copr-add-group-form").submit(function(){var t=r(this),e=t.find('input[type="submit"]').first();return success=function(t){r(".copr-group-selector-wrapper").slideUp("slow",function(){r(".copr-group-selector").append(r("<option/>").val(t.data.id).text(t.data.group_name)).val(t.data.id),r(".copr-questions-wrapper").slideDown("slow")})},a(t,e,success),!1}),r("select.copr-group-selector").on("change",function(){var a=parseInt(r(this).find(":selected").val(),10),o=r(this).closest("form.copr-select-group-form").first();r(".copr-group-loading").removeClass("copr-hidden");var s=o.closest(".copr-question-form").first().find(".copr-form-error").first();if(-1===a)return s.html("<p>".concat(o.attr("data-required-message"),"</p>")).show(),r(".copr-group-loading").addClass("copr-hidden"),!1;var n="".concat(o.serialize(),"&is_ajax=true");return r.post(o.attr("action"),n).done(function(n){if(n.success){s.html("").hide();var i=r(".copr-group-selector-wrapper");if(r('.copr-group-selector, input[name="group_id"]').val(a),i.is(":visible")){t();e(function(){i.slideUp("slow",function(){r(".copr-group-loading").addClass("copr-hidden"),r(".copr-questions-wrapper").slideDown("slow")})})}else{t();e(function(){r(".copr-group-loading").addClass("copr-hidden")})}}else s.html("<p>".concat(o.attr("data-error-message"),"</p>")).show()}).fail(function(){s.html("<p>".concat(o.attr("data-error-message"),"</p>")).show()}),!1})}var s,n})}]);